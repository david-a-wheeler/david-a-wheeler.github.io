<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://www.dwheeler.com/blog/index.rss"></link>
<title>David A. Wheeler's Blog   </title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<h1 style="margin-left: auto; margin-right: auto; width: 50%;">David A. Wheeler's Blog</h1><p>  </p><p></p><h1>Wed, 12 Aug 2009</h1>
<p><a name="auto-destdir"><font size="+2"><b>Auto-DESTDIR released!</b></font></a></p><p></p>
<p>
I&#8217;ve just released
<a href="http://www.dwheeler.com/auto-destdir">Auto-DESTDIR</a>,
a software package
which helps automate program installation on
POSIX/Unix/Linux systems from source code.
If you have the problem it solves &mdash; automatic support for
DESTDIR &mdash; you want this!
</p>

<p>
A little background:
Many programs for Unix/Linux are provided as source code.
Such programs must be
configured, built, and installed, and that last step is normally performed
by typing &#8220;make install&#8221;.
The &#8220;make install&#8221; step normally writes directly
to privileged directories like &#8220;/usr/bin&#8221;
to perform the installation.
Unfortunately,
most modern packaging systems (such as those for .rpm and .deb files)
require that files be written to some intermediate directory instead,
even though when run they will be in a different filesystem location
(because of security issues).
This redirection is easy to do if the installation script supports the
&#8220;DESTDIR convention&#8221;;
simply set DESTDIR to the intermediate directory&#8217;s
value and run &#8220;make install&#8221;.
Supporting DESTDIR is a best practice when
<a href="http://www.dwheeler.com/essays/releasing-floss-software.html">
releasing software</a>.
Unfortunately, many source packages don&#8217;t
support the DESTDIR convention.
Auto-DESTDIR causes &#8220;make install&#8221; to support DESTDIR,
<i>even if</i> the provided &#8220;makefile&#8221; doesn&#8217;t support
the DESTDIR convention.
Auto-DESTDIR is released under the
&#8220;MIT&#8221; license, so it is
Free-libre/open source software (FLOSS).
</p>

<p>
Auto-DESTDIR is implemented using a set of bash shell scripts that
wrap typical install commands (such as install, cp, ln, and mkdir),
These wrappers are placed in a special directory.
The run-redir command modifies the PATH so that the directory with these
scripts is listed first, and then runs the given command.
The make-redir command invokes &#8220;make&#8221; using run-redir, along with
some extra settings to simplify things.
For more information on this approach,
and why this is a good way to automate DESTDIR, see the paper
<a href="http://www.dwheeler.com/essays/automating-destdir.html">
Automating DESTDIR</a>, especially its
<a href="http://www.dwheeler.com/essays/automating-destdir.html#wrappers">
section on wrappers</a>.
</p>

<p>
So please take a look at the
<a href="http://www.dwheeler.com/auto-destdir">Auto-DESTDIR</a>
software package, if you have the problem it solves.
</p>
<p>path: <a href="http://www.dwheeler.com/blog/oss">/oss</a> | <a href="http://www.dwheeler.com/blog">Current Weblog</a> | <a href="http://www.dwheeler.com/blog/2009/08/12#auto-destdir">permanent link to this entry</a></p>
</body></html>