<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://www.dwheeler.com/blog/index.rss"></link>
<title>David A. Wheeler's Blog   </title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<h1 style="margin-left: auto; margin-right: auto; width: 50%;">David A. Wheeler's Blog</h1><p>  </p><p></p><h1>Fri, 19 Sep 2008</h1>
<p><a name="use-system-libraries"><font size="+2"><b>Developers: Use System Libraries!</b></font></a></p><p></p>
<p>
The packagers from a variety of GNU/Linux distributions
are informally uniting to tell software developers a simple story:
&#8220;Use system libraries - don&#8217;t create local copies of libraries!&#8221;
</p>
<p>
The latest push came from
<a href="http://lists.freedesktop.org/archives/distributions/2008-September/000226.html">Toshio Kuratomi&#8217;s email
&#8220;Uniting to get upstreams to use system libraries&#8221;</a>.
Fedora, like most distributions, has a guideline that
&#8220;a package should not link against a local copy of a library&#8230;
libraries should be included in the system and applications
should link against that [instead]&#8221;.
Toshio lists two reasons why this guideline exists (I know there are
other reasons too):
<ol>
<li>Doing otherwise is a &#8220;losing proposition&#8221; when trying to
fix security issues in a library.</li>
<li>&#8220;applications that
include their own copies of libraries are often tempted to apply their
own bugfixes and feature enhancements to the library.  That makes it
harder to port the application to new versions of the library and runs
counter to the open source philosophy of helping to improve the library
for everyone.&#8221;</li>
</ol>
</p>
<p>
I&#8217;m big on security, so reason #1 is a good-enough reason to me.
The
<a href="http://fedoraproject.org/wiki/Packaging/Guidelines#Duplication_of_system_libraries">Fedora packaging rules</a> note that the fixes aren&#8217;t actually
limited to security issues; not duplicating system libraries
&#8220;prevents old bugs and security holes from living on after the core system
libraries have been fixed.&#8221;
But I think the more important reason is hinted at in
the last part of reason #2.
No one - not even a big FLOSS project - has infinite resources.
Different people will find different problems when they use a library.
If the many different applications that use a library report
problems back to the library maintainers,
the library maintainers can fix the problem.
Then, the fix will benefit <i>everyone</i> who depends on the library.
If every application has their own local variant of a library, then
each one will have defects that were fixed in other variants.
</p>
<p>
Toshio then notes:
&#8220;In the world of C applications and libraries, we don&#8217;t often run into
this problem anymore.  Most C application developers have learned the
same lessons we have.  However, in the java, mono/.net, and web
application worlds, this [duplication of libraries is still]
a common practice.  Sometimes our packagers
find themselves trying to convince upstream to change what they do
without success &#8212; upstream is convinced that they need to include these
local copies.&#8221;
In some cases (particularly for Java), there were historical reasons that they
had to do this due to licensing.
But as those reasons have diminished, the practices haven&#8217;t gone away.
</p>
<p>
Fedora, Debian, openSUSE, Gentoo, and Mandriva
all have policies/guidelines specifically recommending or requiring that
packages not have their own special copies of libraries.
All of these distributions clearly explain that applications
should use normal libraries instead.
Unfortunately,
software developers for non-C programs don&#8217;t seem to be hearing the message.
That makes it really hard to package those programs for use by end-users.
As a result, applications are often harder to install, or the easily-installed
versions are much delayed, because of unnecessary difficulties in
packaging the program for end-users.
</p>
<p>
Yes, in a few cases a special copy of a library may be necessary.
Granted.
But it&#8217;s often unnecessary, and it should be the exception, not the rule.
At the very least, it should be trivial to build a FLOSS application
from source code so that it uses the system&#8217;s libraries
instead of some local copy of the libraries.
</p>
<p>
So developers, please, try to work with the standard libraries instead
of creating your own modified copy.
Packagers - and users - around the world will thank you.
</p>
<p>path: <a href="http://www.dwheeler.com/blog/oss">/oss</a> | <a href="http://www.dwheeler.com/blog">Current Weblog</a> | <a href="http://www.dwheeler.com/blog/2008/09/19#use-system-libraries">permanent link to this entry</a></p>
</body></html>