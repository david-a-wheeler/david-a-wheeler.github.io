<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="paper.css">
<title>Countering Spam by Using Ham Passwords</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Describes how to use ham passwords (email passwords) to counter spam. A ham password is a receiver-selected password that a sender includes in their email to prove to the receiver that the message is not spam.">
<meta name="keywords" content="ham password, ham passwords, hamword, hamwords, email password, email passwords, email, password, passwords, spam, unsolicited bulk email, UBE, unsolicited commercial email, UCE, stop spam, anti-spam, countering spam, David, Wheeler, David A. Wheeler">
</head>
<body bgcolor="#FFFFFF">
<center>
<h1 class="title">Countering Spam by Using Ham Passwords (Email Passwords)</h1>
<a href="https://dwheeler.com/contactme.html">David A. Wheeler</a><br>
Originally 2004-07-08; Revised 2011-05-11
</center>
<!-- Originally July 8, 2004 (Revised November 18, 2004) -->

<p>
<i>
This article describes a simple and effective technique for
countering spam -- ham passwords.
A ham password is a special password you ask strangers, or senders in
general, to include in email they send to you.
In particular, a ham password can be easily added to a subject line.
If a new sender wants you to receive an email, then the sender
should include one of your ham passwords to prove that they are authorized to
send the email to you.
This technique is excellent in conjuction with other techniques
to shore up their weaknesses.
In particular, ham passwords can counter the major weakness of heuristic
spam filters, which sometimes incorrectly label ham as spam.
This approach is inexpensive, requires no changes to any software code,
and is simple to understand.
It also is under the control of the user, rather than ceding control
over email to some external entity -- a critical requirement.
It especially works well when combined with other techniques that
handle non-strangers.
</i>
</p>

<h1>Introduction</h1>
<p>
Spam (unsolicited bulk email) is an extremely serious problem, as I discuss in
<a href="stopspam.html">my essay on stopping spam</a> and my
<a href="https://dwheeler.com/guarded-email">paper on guarded email</a>.
Manual solutions (&#8220;delete by hand the spam you get&#8221;) simply don&#8217;t work,
because many people (including me) get too much spam to
review every spam message we get, and as spam increases ever more people will
have that problem.
As a result, if my spam filter thinks a message is spam,
then that message must be automatically deleted without review; and many
other people have (or will have) this problem.
Automatically deleting messages
has the risk of unintentionally deleting important messages
from strangers, so I&#8217;ve had to think of ways to compensate for this problem.
Although there&#8217;s much to like about challenge-response systems
(such as my guarded email approach),
they can be somewhat difficult to set up and maintain on many systems
(since few systems directly support them),
many people object to challenges, and so much email
is forged today that the challenges themselves are often sent to people
who didn&#8217;t send the email in the first place.
<p>
Some extreme anti-spam measures can work, but are completely inappropriate
for me and for many other people.
Some people are willing to accept only email from people they&#8217;ve talked
with before, or are able to keep their email addresses completely secret.
Neither option is appropriate for me; for my circumstances,
complete strangers must be able to contact me.
Any business will have this problem; you <i>want</i> to get new customers!
My email address is too widespread and well-known at this point
to hide it, and I do not want to lose my email address.
Basically, spammers are trying to steal my email address
(by making it impossible to use), and I don&#8217;t
want to lose use of my email address due to the actions of these thieves.
<p>
I currently use a anti-spam approach called &#8220;ham passwords&#8221;
that is often not discussed in the anti-spam literature
(though since I wrote this piece, that&#8217;s changing).
Although I
<a href="https://dwheeler.com/contactme.html">briefly
describe my approach on my website</a>
(and have for a while), I thought
it&#8217;d be useful to describe it in more detail so that others could use it too.
I suspect that others use this approach, since it&#8217;s an obvious one,
but I haven&#8217;t seen it described anywhere else before.
Pointers to previous descriptions would be welcome!
I thought describing it would be helpful to others, so here&#8217;s
my description!
It&#8217;s similar to challenge-response systems, but there&#8217;s no challenge.
While it&#8217;s not perfect, it definitely helps, and it really works well when
combined with other anti-spam techniques.
There are similar approaches (such as including password-like information
in an email address), but ham passwords have some advantages
as I discuss below.

<h1>Ham password (Email Password) Approach</h1>
<p>
The primary approach I use for countering spam is something I
term a &#8220;ham password&#8221;.
A ham password is a special password you ask senders (at least strangers)
to include in email they send to you.
In particular, you ask strangers to include this information;
once you start conversing with someone, there are other ways to determine
that the messages aren&#8217;t spam.
Basically, think of the act of sending email as a privileged operation
not permitted to just anyone:
If a sender wants you to receive an email, then the sender
should send a ham password to prove that they are authorized to
send the email to you.
<p>
<a href="https://dwheeler.com/contactme.html">
I ask strangers who want to send email to me to include the
ham password in the subject line of any email message</a>.
It&#8217;s simple, it&#8217;s straightforward, and people <i>will</I> do it.
If a ham password is included in the subject line,
it&#8217;s scored in my spam filters as <i>much</i> less likely to be spam.
Current spam filtering tools have the serious risk of labelling
good mail (&#8220;ham&#8221;) as spam; ham passwords are an effective way of
eliminating this risk of spam filters.
Note that the ham password has to be in the subject line; a spam message that
tries to put a dictionary in the subject line could be considered as an
attack to start with, and looking only at the subject line means there
is practically no performance impact.
<p>
If you have a ham password, you need to make sure that legitimate senders
will be able to find it.
There are many ways to do this; most people will probably want to
do what I do, which is to use a single webpage that gives the
email address and the ham password I want them to use.
Generally, you shouldn&#8217;t just make either piece of information easy to
read by machine.
I give my email address as a set of instructions, and
I make my ham password available
as shrouded graphical image (a picture with intentional distortions).
I also provide human-readable textual instructions on how to determine
the ham password for the sight impaired.
I use textual instructions on how to create the ham password
(like &#8220;The password is the letter g, followed by &#8216;eorge&#8217;&#8221;), but you
could use a question of fact instead
(&#8220;What is the first name of the first U.S. president?&#8221;), especially
if you only want certain kinds of people to be able to contact you.
<p>
It&#8217;s very important to include a textual version, so that
sight-impaired people can still get the ham password.
You also shouldn&#8217;t include the ham password as simple text or simply
make a picture of the ham password, because automated systems
run by spammers might be able to figure that out easily.
<p>
Distributing ham password information via a web page is really easy to do.
Most ISPs give people a small website space as part of their
package, and many sites let people create a small web page for free.
Even if you don&#8217;t know how to create a website, you probably can find
someone who can do it for you.
A website is an especially easy way to distribute the ham password, but
it isn&#8217;t strictly necessary.
I give the ham password to people I
meet in person, and other distribution methods can work too.
On a business card, you can just say &#8220;(include &#8216;X&#8217; in subject)&#8221;
after the email address.

<p>
In general, try to make sure that both pieces of information (address
and ham password) are on only one web page.
That will make it easy to change the ham password -- the only way people
will get your email address will be by going to a single location,
which you can later edit to change the ham password.
You can see an example in
<a href="https://dwheeler.com/contactme.html">my contact information</a>.


<h1>Useful Augmentations</h1>
<p>
<p>
I augment this approach with a variety of other anti-spam techniques.
No single technique does everything; what I&#8217;ve found is that
ham passwords make other techniques much more effective.

<p>
First, it&#8217;s useful to support more than one ham password.
This way, when you switch from one ham password to another, you can
offer a transition time (particularly important if you put the
ham password on business cards).
It&#8217;s even more useful for mailing lists, as I discuss below.

<p>
Another anti-spam technique I use is a &#8220;reply indicator&#8221; which
is something like a ham password in reverse.
When I reply to email messages, I include a small sequence
of text that appears reasonable and is likely to be included
in any replies.
It&#8217;s not malicious text, or a tracking device; it&#8217;s just a special
sequence of text that others are unlikely to created exactly by accident.
I don&#8217;t particularly note &#8220;this is a reply indicator&#8221;
in my messages,
so that messages that eventually get widely circulated don&#8217;t
automatically tip off a spammer to what I use as the reply indicator.
When I receive a message, I have filters look in
its <i>body</i> for the reply indicator.
If the message has the reply indicator, it&#8217;s extremely
likely to be a reply to one of my previous messages, and
I adjust its spam score to show that it&#8217;s unlikely to be spam.
This isn&#8217;t needed for a ham password technique,
but you may find it a helpful addition.
<p>
I also use traditional approaches to countering spam, in particular
a whitelist, spam content filtering (including
<a href="http://www.paulgraham.com/spam.html">Bayesian filtering</a>),
a blacklist, and a &#8220;Junk mail&#8221; folder
where apparantly-spam messages go.
The whitelist means that people who I <i>do</i> talk to
are unlikely to be caught by any of this stuff, so they don&#8217;t need
to include ham passwords or anything like that.
Once I reply to someone they are usually put on my whitelist
(so I will automatically receive emails from that individual).
By using traditional spam content filtering and blacklisting
(such as implemented by SpamAssassin),
there&#8217;s a fair chance that people who I&#8217;ve never contacted before,
and don&#8217;t use my ham password, will still reach me... but at least
those legitimate people who really want to contact me have a way
of increasing their chances.
<p>
Sometimes companies send you confirmation messages after you interact
with their website, for example, airlines may send flight information, or
confirm that you have a new account.
Sadly, most of them don&#8217;t let you control what&#8217;s in the subject line.
That&#8217;s okay.
In that case, I&#8217;m expecting the email, so if I don&#8217;t see it I&#8217;ll
open up my Junk mail folder and search for the message I was supposed to get.
Note that I don&#8217;t have to read every message subject line
in the Junk mail folder...
I just have to search for the organization whose message I was expecting.
Often I expect the message immediately, so I don&#8217;t even have to formally
search, I just open up my Inbox folder immediately after I&#8217;ve paid/registered,
and if it&#8217;s not there, open up my Junk mail folder... it should be
among the ten most recent messages!
<p>
Domain authentication techniques (like SPF and DomainKeys) and
user authentication techniques (like digital signatures from S/MIME and
OpenPGP) can make the whitelisting far more effective.
Then things can work quite cleanly: imagine that
strangers send you a ham password to get started, and any email you send
or reply to has that email address added to the whitelist;
spammers can&#8217;t exploit that easily, because anyone in the whitelist has their
domain authenticated.
I intend to check SPF information at some point, though SPF has serious
problems with forwarding (and I <i>do</i> use a forwarder), so
I&#8217;m not sure how long it&#8217;ll be before I can really use SPF to filter
incoming email.
I do provide SPF information about me to others,
so that people who use SPF can
throw away some of the email that&#8217;s forged to look like it came from me.
<p>
Currently
I automatically drop nearly all email error messages (basically the
&#8220;email failed to be delivered&#8221; messages) unless it has my
reply indicator or ham password.
This definitely has disadvantages; this means that if an email I send
fails to be received for some reason (say because of a bad email address),
and the error reply doesn&#8217;t include the ham password or
reply indicator, I have no way to know about the failure.
But I must do something, because spammers forge my email address so often
that I would probably receive tens of thousands of error messages a day
if I didn&#8217;t do it.
I typically include my ham password in messages I send to people for the first
time; when I do that, since error messages typically quote the message
that caused the error, I&#8217;ll typically get the error reply.
One complication is that some error messages will reply with the original
message in the <i>body</i> and not the subject line;
this means that a good approach for getting valid error messages is to
examine the body (as well as the subject line) for the ham password.
That would work, though it&#8217;d take more CPU time, and you&#8217;d better
choose a ham password that a spammer is unlikely to be able to
automatically guess (say using a dictionary in the email).
You could even choose a different ham password for this purpose than your
&#8220;regular&#8221; ham password(s).
A more sophisticated setup could keep track of emails that were sent,
and then compare them to error messages received, and accept only
error messages related to a message I&#8217;ve actually sent.
That presumes I only send email in a way that a single system can track,
which isn&#8217;t true.
I haven&#8217;t bothered to get more sophisticated;
this approach works well enough as it is.
Others might not want to do this, or do it differently;
it&#8217;s certainly not fundamental to the ham password scheme.


<p>
<h1>How to Implement Ham Passwords</h1>

<p>
If you can control the ruleset of your spam content filtering system,
then implementing ham passwords is easy: just add a rule for the
ham passwords, and maybe another rule for the reply indicator.

<p>
But if you can&#8217;t manipulate your spam content filtering system,
you can still implement ham passwords.
Most mail systems have a simple rule system
that can let you search subjects (and bodies) for
specific phrases, and then if those phrases are included,
directly move that message immediately into the Inbox or some other folder.
That&#8217;s all you need to implement ham passwords.
People already use these mechanisms so that,
for example, they can automatically get
messages that mention a topic they&#8217;re keenly interested in, or presort
their messages into different folders, or trash certain spam, so the
necessary mechanism is already widely implemented and understood by many.
Many systems (like Runbox) even let you prioritize these rules, so it&#8217;s
easy to make searching for the ham passwords a high-priority rule
that supercedes many other rules.
Here are a few examples:

<ol>
<li>
<i>Yahoo</i> (a web-based email service).
Once logged in, click on &#8220;Mail Options&#8221;, then click on &#8220;Filters&#8221;.
Click on &#8220;Add&#8221; to add a new rule,
name the rule (name it something obvious like &#8220;Ham password&#8221;)
and then next to the entry for
Subject &#8220;contains&#8221;, add the value of your ham password.
Select the action as move the message to &#8220;Inbox&#8221; (or some other folder),
then click on &#8220;Add Filter&#8221;.


<li>
<i>Runbox</i> (a web-based email service).
Once logged in, click on &#8220;Manager&#8221;, then click on &#8220;Filter&#8221;.
Select Messages where &#8220;subject&#8221; &#8220;contains&#8221; the ham password, and
state that they will be saved to folder Inbox (or another folder).
Be sure to select that the rule is &#8220;Active&#8221;, then click on &#8220;Save settings&#8221;.

<li>
<i>Mozilla / Netscape / Thunderbird</i> (popular email clients).
Select Tools/Message Filters, then click &#8220;New&#8221;.
Set the filter for incoming messages that match any of the &#8220;Subject&#8221;
&#8220;contains&#8221; and then enter the ham password.
Set the action to be &#8220;Move to folder&#8221; and the relevant &#8220;Inbox&#8221; folder
(or another folder if you prefer).
Then click &#8220;OK&#8221;.
This information is actually for Netscape 7, but Mozilla Mail (what Netscape
is based on) and Mozilla Firefox should be quite similar.

<li>
<i>Outlook</i> (a popular email client).
Select Tools &gt; Rules Wizard,
click on &#8220;New&#8221; to create a new rule,
click on &#8220;Check messages when they arrive&#8221; and then Next,
and click the box next to &#8220;with  specific words in the subject&#8221;.
A new dialog box will appear where you can Add as the words or phrases
(you can add more than one); then click Next.
Click on &#8220;move it to the specified folder&#8221;; then pick a folder
(&#8220;Inbox&#8221; is a reasonable choice).
Then give the rule a name (like &#8220;Ham password&#8221;).
You can prioritize this rule, if you want to.
This information is for Outlook 2000, but other versions are likely similar.
<!-- I based this on http://www.sitedeveloper.ws/tutorials/spam.htm -->
</ol>


<p>
I read messages with the ham password first.
This is easy to do; just search for subject lines that contain
the ham password.
If you raise the priority of email that has the ham password,
the reply indicator, or is from someone you know (e.g., someone in
your address book),
then it&#8217;s much easier to quickly review the other messages that were merely
accepted by the spam filter as non-spam.
In my situation, most of them are spam too,
but it&#8217;s as least possible to review those quickly and bulk-delete them
as spam once you&#8217;ve reviewed them.
I actually don&#8217;t instantly delete messages that are determined to be spam;
I hold them in a separate folder in case there&#8217;s an important message
that someone mentions to me soon after.
But I must delete the spam soon after; there&#8217;s just not enough space in
the world to store an endless stream of spam.


<p>
<h1>Variations on the Theme</h1>
<p>
Another variation is to automatically add to your
address book any sender who includes the ham password,
and then allow anyone in your address book to be automatically accepted.
I don&#8217;t do that, because there are so many spoofers in the world.
Once SPF becomes more common, I may go ahead and do that;
many other people seem happy doing that.
<!-- Double-check:
  <a href="http://www.mailsecret.com">MailSecret</a> seems to do that. -->

<p>
In theory, you could actually <i>require</i> strangers to include
the ham password.
But that&#8217;s really extreme,
and I haven&#8217;t found that necessary; simply prioritizing messages has
been sufficient for me, since it enables me to let the
spam content filtering system automatically delete messages with less worry
that important messages will be dropped.
If you&#8217;re a stranger, I expect you to use my ham password; if you don&#8217;t,
I&#8217;m <i>likely</i> to see the email but you run a much greater risk
of getting your email thrown out, and you may not be seen as quickly
(since I read ham passworded email first).

<p>
You don&#8217;t need to make it easy to get the ham password at all.
Make it a complicated riddle, or only put it on your business card.
But if you make it hard, people may not send you email you <i>do</i> want.

<p>
I can certainly imagine that it&#8217;d be very useful to create a new
email header &#8220;Ham-Password:&#8221; with a ham password value, and look at it
for a ham password.  Mail clients could then fill in ham password values for
each email address they send to.
For this to work, ham password values would need to be harder to guess;
spammers could include dictionaries of ham password values unless there
was some bound to the number of ham passwords.
But there are no clients today that support a ham password header,
and I don&#8217;t have time to start a campaign to do so.
I just ask people to put ham passwords in the subject line.
While using the subject line is low-tech, it works so well that it&#8217;s hard
to worry about making the approach fancier.
If you automatically accept email from people you&#8217;ve had email with
before (automatic whitelisting),
there&#8217;s little need to do so, <i>especially</i> if you use
SPF or DomainKeys to authenticate the domain of the sender.

<h1>Mailing Lists</h1>
<p>
Many anti-spam systems don&#8217;t handle mailing lists well, but
ham passwords can handle them quite nicely.
(An earlier version of this article said that ham passwords didn&#8217;t
handle mailing lists, but on further reflection I&#8217;ve realized I was wrong;
ham passwords actually work quite nicely.)
One interesting factor with mailing lists is that there are actually
<i>two</i> email receptions that need to be controlled:
<ol>
<li>Receipt by the mailing list (from the sender)
<li>Receipt by the mailing list members (from the mailing list)
</ol>
Since sending to a mailing list involves two different receptions,
we&#8217;ll discuss those receptions separately.


<h2>Receipt by the Mailing List</h2>
<p>
A mailing list can continue to use whatever mechanisms it uses
to prevent spam from being sent to its members.
A simple and common approach is to require that only members can send
to the mailing list, for example.
<p>
However, a mailing list is a recipient, and thus could require
the use of a ham password before it accepts a message to be sent
on to its members.
I&#8217;ll term this the &#8220;posting ham password&#8221; to distinguish it from
other possible uses of ham passwords by mailing list recipients.
As with all ham passwords, this could be in the subject, another header,
or the message body, though the subject seems reasonable enough.
Information about the posting ham password could be distributed in the same
way it&#8217;s distributed for individuals, e.g., as a picture and
text description on a website.
The mailing list administrator would need to initially set up the
posting ham password, but would only need to change it when a spammer
abuses it.
<p>
It would be wise for the mailing list to strip away the
posting ham password before sending the message on to recipients.
This <i>does</i> mean that any digital signatures from the
individual recipient that cover the data will fail; one solution is to
include the posting ham password in a header (such as the subject), and
attach the actual signed message so that only the attachment is
digitally signed.
<p>
Many combinations and variations are possible, which solve
many typical mailing list problems.
Each mailing list can set up the posting policy that&#8217;s best for it.
Some mailing lists want strangers to be able to send to them
without becoming a member, or allow subscribers to send from email
accounts that are <i>not</i> the accounts they receive email on.
<p>
Here&#8217;s a plausible posting policy that allows posting by non-subscribers,
yet protects members from spam; as an example of what you could do:
<ol>
<li>See if the sending domain has a domain authenticator (such as SPF
or DomainKeys); if it does, check the authentication, and
throw away email that doesn&#8217;t meet authenticate to its domain.
This gets rid of some spoofed messages if there&#8217;s a way to check for them.
<li>If it includes the current posting ham password, accept the message.
<li>If it comes from a current subscriber, accept the message.
This assumes that subscribers are already checked in some way
(e.g., by a confirmation message), and that way is sufficient.
<li>Check the message using a spam filter. If it appears to be spam,
throw it away, since we don&#8217;t want to burden the mail administrator with
piles of spam from messages that aren&#8217;t from subscribers and don&#8217;t
have the posting ham password.
Otherwise, send it to the mail administrator as a potentially-good message.
</ol>


<h2>Receipt by the Mailing List Members</h2>

<p>
If you make ham passwords optional (as I do), then you don&#8217;t <i>need</i>
to do anything to receive email from a mailing list.
Hopefully, the information from the mailing list you&#8217;re subscribing to
won&#8217;t look so much like spam that your filters will trap it.
Frankly, if the mailing list allows anyone to send to it, that&#8217;s
probably the best solution, since there probably <i>is</i> spam in it.

<p>
However, if the mailing list doesn&#8217;t normally include spam,
there are other options.
There are at least three ways that a ham password user can directly
handle mailing lists to make sure they get their mailing list email:
whitelisting, a list-defined reverse ham password,
and a member ham password
(having the mailing list include individual ham passwords with
each messsage it sends).
Each option is described below.

<h3>Whitelist</h3>

<p>
A &#8220;whitelist&#8221; is the simplest and most traditional approach.
Here, before you add yourself to the mailing list, you modify the
list of emails you&#8217;ll always accept email from (the &#8220;whitelist&#8221;) to
include the mailing list&#8217;s address.
If the mailing list always sends mail from a specific email address
(say in the &#8220;From&#8221;, &#8220;Resent-From&#8221;, and/or &#8220;Reply-To&#8221; headers)
this works well enough.
Combining this with a simple authentication system (like SPF or
DomainKeys) would be especially effective.
If the mailing list address changes, then you&#8217;ll need to edit your
whitelist, but mailing lists rarely change their address.
Some mailing lists don&#8217;t tell you ahead-of-time what address
they&#8217;ll send email from; this is a failure of documentation, and a
simple request to the administrator should fix that for everyone.
A few rare mailing lists simply forward emails without giving you
useful information on what mailing list it came from;
in that case, you&#8217;ll need to convince them to add that information
or use a different approach.

<h3>Reverse Ham Password</h3>
A second approach is for each mailing list to define a reverse ham password
for itself.
A reverse ham password is just a password that the sender will include
in their message, which the receiver accepts as verification that the
message is ham.
Then, anyone on the mailing list adds the mailing list&#8217;s reverse ham password
to their set of ham passwords before joining.
Many mailing lists already do this in a sense -- a mailing list that
adds a keyword to the subject line can be viewed as doing this, since
the keyword can be considered a reverse ham password.
I term this a reversed ham password, because in this case
the password is &#8220;proving&#8221; that the message is from a trusted sender.
The mailing list reverse ham password could be provided 
in many ways, say via the subject line, a special Ham-Password header,
or in the body;
the subject is by far the simplest approach, while including information
in the body could increase the workload.
There are disadvantages to this approach; since the reverse ham password is
known to any potential subscriber, a spammer might use that information.
For example, the spammer might include the reverse
ham passwords of many widely-subscribed mailing lists in their spam,
hoping to hit one.
Or they might be more targeted, gathering addressees of mailing lists and
using the reverse ham password to target them.
That&#8217;s especially a problem if the email addresses of subscribers can
acquired automatically, say via archives or an automated query.
But locking down addressee information is often done anyway, since it&#8217;s
a good practice regardless, so in many cases will not be a problem.
If a spammer does start attacking a particular mailing list,
the mailing list administrator can
warn everyone he&#8217;s changing the mailing list&#8217;s reverse ham password,
and after a little while make the change.


<h3>Member Ham Password</h3>
A third approach is for mailing list subscribers to tell mailing lists
a ham password specific to them; I&#8217;d call this a &#8220;member ham password&#8221;.
Then, when the mailing list sends an email, it includes the
member ham password of the mailing list
recipient in its message to the recipient.
<p>
Again, there are many ways that the member ham password could be provided
in the message,
such as via the subject line, a special Ham-Password header,
or in the body.
Using the subject is by far the simplest approach, while including information
in the body could increase the workload of the recipients.
<p>
There&#8217;s also the question of whether or not the messages sent by the
mailing list should be shared.
If the mailing list sends a separate message to each recipient, then
each recipient need not see the ham password of anyone else, a good thing.
But using separate messages for each recipient
will greatly increase the workload of the mailing list,
a problem for very large mailing lists.
The alternative is to include a long list of ham passwords in each
message; this is probably impractical in the subject line, and
annoying in the body, so this cries out for a special &#8216;Ham-Password&#8217;
header.
Intermediate approaches are possible, where a single message is sent
to a number (say up to 100) of the mailing list members, and multiple
messages are sent out until the entire mailing list is covered.
<p>
There are two variations for member ham passwords that I see:
receiver-selected, and mailing-list-selected.
<ol>
<li>
For receiver-selected member ham passwords,
the receiver selects and maintains the ham password.
Receiver-selected member ham passwords have the advantage that the
receiver doesn&#8217;t have to maintain a list of ham passwords
(though in practice this is pretty easy, it&#8217;s just a list).
But there&#8217;s a lot of 
administration work required by the mailing list
to allow users to control these ham passwords
(such as handling changes to them, etc.).
<li>
For mailing-list-selected ham passwords, the mailing list selects
the member ham password, a different one for each user.
This can be done by having the mailing list manager create
a long unguessable secret key.
Then the mailing-list-selected ham password can be computed by
combining the secret key with each receiver&#8217;s email address (in turn)
using a cryptographic hash function.
The mailing list will then tell each receiver in turn,
&#8220;when we send a message to you, we&#8217;ll include this marker in the
subject line&#8221; (or wherever the ham password is placed).
As long as the key is kept secret, this foils spammers;
the reverse ham password will be different for each combination
of sender and receiver.
This requires some changes to how people sign onto the mailing list,
and how email is sent.
It also requires that receivers add each mailing-list-selected ham
password to the set of ham passwords they accept for each mailing list
they sign up for.
</ol>
<p>
Member ham passwords requires changes in the mailing list software,
and more administration work to control them.
These are pretty significant disadvantages, and their pain doesn&#8217;t
currently seem worth the gain.
Sending email with individual ham passwords is certainly possible, but
currently the other approaches seem sufficient.
But if in the future they aren&#8217;t sufficient, then these seem to
helpful for countering those future potential threats.


<h1>Automated Notification (Such as Shipping Confirmation)</h1>
<p>
Suppliers sometimes want to add their customers to general mailing lists,
and those can be handled as described above.
But sometimes suppliers want to send automated notifications specifically
to just you at a later date using an automated system.
A common example is a shipping confirmation from a pre-existing order.
This can be handled just like any other interaction;
if you send an email to them first, your system could whitelist them.
Alternatively, the supplier should tell you what address they&#8217;ll
send emails from, and you could whitelist that.
<p>
For most folks, these are sufficient, and you don&#8217;t need to use
ham passwords.
But are there ways ham passwords could be used here too? Sure.
<p>
A small supplier could tell you their single (constant)
reverse ham password.
For example, a supplier could say &#8220;We always include [SUPPLIER-NAME]
in the subject line when we send you notifications.&#8221;
If you add that marker to your list of acceptable ham passwords, then you&#8217;ll
get the email.
But that won&#8217;t work for large suppliers; if Amazon.com had a single
reverse ham password that everyone accepted, then spammers would
start using it too.
<p>
A better solution for large suppliers is for the supplier to have
a long unguessable secret key.
then the supplier can combine the key and the receiver&#8217;s email address
using a cryptographic hash function, and tell each receiver
&#8220;when we send a message to you, we&#8217;ll include this marker in the
subject line&#8221;.  as long as the key is kept secret, this foils spammers;
the reverse ham password will be different for each combination
of sender and receiver.
<p>
You could also maintain a list of ham passwords, one for each recipient,
just like the member ham password selected by the recipient for mailing lists.
This would mean that receivers wouldn&#8217;t need to keep adding new
ham passwords that they accept.
The disadvantage is that this would require much more administrative work
to store and permit administration over all those ham passwords, and
a spammer might be able to break into the sender&#8217;s system
and get all those general-use ham passwords.



<h1>Countering Attacks by Spammers</h1>
<p>
Ham passwords can&#8217;t be kept secret in the absolute sense,
because you want strangers to get them.
But once the spammer gets a ham password, you can just switch to
a new ham password (and a new reply indicator, if you use one).
You can even have a transition time where you accept both the
new and old ham passwords, and later on drop support for the old one.
The goal here isn&#8217;t to make it impossible to get the ham password -- just
to make it too expensive for a spammer to send messages to you.
Typically spammers use automated techniques to acquire email account names,
and this approach raises the bar by making those automated techniques
less effective.
<p>
Basically, the goal is to make it so much work for the spammer
that they&#8217;ll stop sending spam to you.
<p>
It&#8217;s not foolproof, but it does really help, and
I&#8217;ve been using it (and mentioning it on my website) for a long time.

<h1>Contrast with Other Anti-Spam Techniques</h1>
<p>
Ham passwords can be used in isolation, but I think they&#8217;re best used
in conjunction with other techniques.
In particular, ham passwords are great at countering the biggest problem
with spam filters: incorrectly labelling good email as spam.
Ham passwords make it possible for me to rely much more heavily on my
filters, because if a stranger really wanted to contact me, he or she
would use my ham password... so I don&#8217;t need to review the stuff labelled
spam at all.

<p>
A great advantage of ham passwords is their simplicity.
They require no changes in the software of the sender, receiver, or
infrastructure.

<p>
This approach is similar to disposable addresses, passworded
addresses, and &#8220;watchword&#8221; email addresses,
where password-like information is encoded into the email address itself.
<a href="http://www.spamgourmet.com/disposableemail.pl?advanced=1">
See Spamgourmet&#8217;s advanced system for an example.</a>
However, once someone starts a dialogue with you, you often want to
continue that dialogue.
If the address has a limit on the number of receipts, then eventually
that number is exceeded -- which you didn&#8217;t want.
If it doesn&#8217;t have a limit on the number of receipts,
eventually that email address will leak out to others, and now you&#8217;re
getting spam.
A trusted whitelist helps keep existing dialogues continue, but it
doesn&#8217;t help all that much when strangers want to send you ham.
Worse, because these systems must be easy for humans to use, it&#8217;s usually
pretty trivial for a spammer to guess what your &#8220;real&#8221; email address is
(or try all likely combination).
Fundamentally, email addresses were designed to be public and they&#8217;re
hard to keep private.
It&#8217;s a lot like logging into a computer that has usernames but no passwords --
it&#8217;s better than nothing, but usernames are hard to keep secret from
automated systems that search for them.
And finally, none of this works all that well with typical
infrastructure -- you have to modify your systems in many cases for
these to be effective.
These are actually reasonable approaches, and many people are happy
with them, but I think ham passwords are a reasonable alternative.

<p>
This approach is also similar to
<a href="http://www.hashcash.org/">Hashcash</a>.
In hashcash, the sending computer (at least for a stranger) must
do extra work to compute a value that the recipient can easily confirm.
The difference is that in hashcash, a tiny amount of extra work
is done by the sender&#8217;s
computer, while in ham passwords, a tiny amount of extra work is done by
the human sender (who has to type in the hash password).
As long as this extra information is only needed for strangers to
start a conversation, both approaches are quite reasonable.
Hashcash&#8217;s advantage is that you don&#8217;t need to know <i>anything</i>
about the recipient other than the email address, while for
ham passwords, you now need to know the ham password.
But unlike hashcash, ham passwords are easy
to implement without changes to the sender, receiver,
or infrastructure software,
Ham passwords don&#8217;t excessive computing resources, either, a problem
if senders have low-performance machines and spammers have
tens of thousands of 0wned machines doing their computing for them.
I actually like hashcash, but I get most of the benefits of hashcash
using email passwords without any of the headaches of an approach
that isn&#8217;t yet widely adopted.

<p>
Unlike economic models (that charge for &#8220;first class postage&#8221;), this
approach doesn&#8217;t require complex infrastructure changes, or a tollbooth, or
allow large organizations to take control over everyone&#8217;s Internet email.

<p>
Habeas had a neat idea: create a copyrighted work, and if it was
included, it&#8217;s ham.
Problem is, many spammers are happy to do illegal activities, and as a result,
<a href="http://speed.insane.com/archives/2004/03/13/habeas_spam.php">
most messages with the habeus mark are actually spam</a>.
Habeus plans to create a whitelist of organizations, but really, it&#8217;s
just another whitelist at that point.
The problem is that the Habeas text is a constant known by all
(including spammers).  With the ham password approach, every single person
has a <i>different</I> ham password, controlled by the recipient, so
just including a single text string won&#8217;t do any good.

<p>
Challenge-response systems have their advantages.
But some senders don&#8217;t like them, and there are so many spoofers
that you&#8217;ll easily end up sending unwanted messages with one.
They&#8217;re also a challege to set up.
Ham passwords, in contrast, are easy to set up.

<P>
In many ways, ham passwords aren&#8217;t really a <i>contrast</i> to other
approaches as much as a technique that <i>augments</i> other
approaches.
When combined with spam filters, ham passwords counter their weakness --
incorrectly labelling ham as spam.
When combined with domain authentication (where the ham password
lets you receive email anyway), they deal with their problem --
that sometimes you <i>want</i> to allow anonymous email
such as &#8220;tips&#8221; from whistleblowers, yet not allow spammers
to get through with a simple forged email address.

<p>
Ham passwords aren&#8217;t perfect.
Not everyone will include a ham password; thus, I don&#8217;t <i>require</i>
them from strangers (though I could).
But because I don&#8217;t require it,
spam still gets through my spam filters, which is terrible.
Nevertheless, because of ham passwords, I&#8217;m willing to make my filters much
more rigorous; I can make my filters unusually strict,
and I simply never even review the email that
my initial filter claims is spam.
Basically, ham passwords have made it possible for me to use email
without worrying that I&#8217;m losing critical email from strangers.
If it was critical to the stranger, they&#8217;d use the ham password.




<h1>History of the Name</h1>
<p>
Originally I called this approach an &#8220;email password&#8221;, since it was the
first name I could think of.
But accessing email
often involves many passwords, so wasn&#8217;t a good name;
I even acknowledged that it wasn&#8217;t a good name in my original online paper.
I considered using the term &#8220;hamword&#8221; instead,
but a Google search revealed that the term &#8220;hamword&#8221;
is often used in technical anti-spam literature with a slightly different
meaning.
And &#8220;hampass&#8221; is easily mispronounced in an undesirable way.
<p>
On November 16, 2004, I settled on using the term &#8220;ham password&#8221;.
Ham passwords are little passwords created by the receiver that
senders can use to prove that their content is &#8220;ham&#8221; (as opposed to spam),
so combining &#8220;ham&#8221; and &#8220;password&#8221; seemed reasonable.

<h1>The Law</h1>
<p>
Since anyone can throw away any email message they receive,
there&#8217;s absolutely no law against using ham passwords.
And since reply indicators are simply a string of text that others
can include (or not), I see not reason for them to cause
legal troubles either.
<p>
In the long term, I believe that governments must step in and
make spamming illegal, with serious legal teeth (including possible
prison terms and financial bankruptcy)
for the spammer and the people who fund them, as well
as making spamming itself illegal (instead of just fraudulent headers
and spamming after a &#8220;please stop&#8221; message).
Spamming is a massive denial-of-service attack against people&#8217;s
email accounts, and it&#8217;s basically a theft of service.
After all, it doesn&#8217;t matter if you own an email account
if you can&#8217;t use it.
But the history of computer crime law shows that this takes time;
it took a long time for laws to be written to criminalize computer crime,
and it&#8217;s really still in process.
Current laws are completely ineffective; that&#8217;s especially true for
the U.S. law, since it requires opt-out of a mailing list
(an approach already shown to be worthless)
instead of opt-in approach to mailing lists.
But that&#8217;s not surprising; lawmakers often try to make small steps in
the hopes that they will incrementally ratchet things up until they
solve the problem.
Eventually laws with real teeth
will have to be written, or email will be useless.
Since legislatures like to use email, and have constituents who will
throw them out if their email is made useless, in the long term I
think the spam epidemic will be addressed.
<p>
But in the short term, we need to use email in spite of inadequate laws.
Approaches like ham passwords will hopefully make it possible to
keep using our email until the legislatures around the world
catch up to the technology.

<h1>Other Information</h1>
<p>
If you&#8217;re curious, you can also see my
<a href="https://dwheeler.com/essays/stopspam.html">essay on stopping spam</a>
and my
<a href="https://dwheeler.com/guarded-email">paper on guarded email</a>;
they both include many references to other anti-spam
techniques.
There&#8217;s a long list of ideas for countering spam, and I think a combination
will probably be best. Besides SPF, one approach that looks very
promising is
<a href="http://www.hashcash.org/">Hash Cash</a>, which uses a
computational &#8220;stamp&#8221; to give evidence to others that you&#8217;re not a spammer.
<p>
I&#8217;ve also written several articles on other topics you may find interesting,
including
<a href="https://dwheeler.com/secure-programs">writing secure programs</a>
and
<a href="https://dwheeler.com/oss_fs_why.html">quantitative
reasons why you should consider open source software / Free Software
when acquiring software</a>.
Many in the information technology community find my
<a href="https://dwheeler.com/innovation/innovation.html">
paper on key software innovations</a> to be interesting.
And of course, you can always
<a href="https://dwheeler.com">visit my home page</a>.

</body>
</html>


